{"remainingRequest":"C:\\Users\\81533\\Desktop\\pccaketogithub\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\81533\\Desktop\\pccaketogithub\\vue_app_00\\src\\components\\web1908\\xz\\Cart.vue?vue&type=style&index=0&id=1514b6c2&scoped=true&lang=css","dependencies":[{"path":"C:\\Users\\81533\\Desktop\\pccaketogithub\\vue_app_00\\src\\components\\web1908\\xz\\Cart.vue","mtime":1583240289052},{"path":"C:\\Users\\81533\\Desktop\\pccaketogithub\\vue_app_00\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\81533\\Desktop\\pccaketogithub\\vue_app_00\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1521907988000},{"path":"C:\\Users\\81533\\Desktop\\pccaketogithub\\vue_app_00\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\81533\\Desktop\\pccaketogithub\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"C:\\Users\\81533\\Desktop\\pccaketogithub\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.cart{\n    width:100%;\n    border-top:1px solid #D8D0D0;\n    margin-bottom:240px;\n}\n.cartbox{\n    width:1200px;height:500px;\n    margin:0 auto;\n    position: relative;\n}\n.cartimg{\n    position:absolute;\n    left:41%;\n    background:#fff;\n    margin-top:20px;\n}\n.cartinfo{\n    width:1200px;height:44px;\n    position:absolute;\n    top:20px;\n    text-align:left;\n    /* line-height: 100px; */\n    font-size:18px;\n    color:#464646;\n}\n.buytitle{\n    position: absolute;\n    top:14%;\n    color:#666;\n}\n.cartinfo{\n    position: absolute;\n    top:40%;\n}\n.cartinfo .img{\n    float: left;\n}\ntable{\n    border-top:1px solid #E8E0E0;\n}\ntable thead{\n    font-size: 14px;\n    color: #666;\n    text-align:center;\n    font-weight: bold;\n}\ntable thead td::after{\n    content: \"|\";\n    color:#E2E2E2;\n    float: right;\n}\ntbody td{\n    text-align: center;\n}\n.img{\n    width:100px;height:100px;\n    vertical-align: middle;\n}\n.one{\n    width:512px;height:74px;\n}\n.two{\n    width:320px;height:74px;\n}\n.three{\n    width:81px;height:74px;\n}\n.four{\n    width:149px;height:74px;\n}\n.five{\n    width:86px;height:74px;\n}\n.six{\n    width:41px;height:74px;\n}\n.cname{\n    margin-top: 40px;\n    font-size: 18px;\n    color:#522725;\n    \n}\n.list-text1{\n    font-size: 18px;\n    color:#522725;\n}\n.btn1{\n    width:26px;height:25px;\n    background-image: url(../../../img/details/jian.png);\n    outline: 0;\n    border:0;\n}\n.btn2{\n    width:26px;height:25px;\n    background-image: url(../../../img/details/jia.png);\n    outline: 0;\n    border:0;\n}\n.btn3{\n    width:26px;height:25px;\n    background-image: url(../../../img/details/delete.png);\n    outline: 0;\n    border:0;\n    cursor: pointer;\n}\n.count{\n    display: inline-block;\n    width:40px;height:18px;\n    border:1px solid #ccc;\n    padding-top: 6px;\n}\ntable tbody td:nth-child(5){\n    font-size: 14px;\n    color:red;\n}\n/*1.购物车商品 */\n.cart-item{\n    display:flex;/*子元素水平 */\n    justify-content:space-between;/*水平两端对齐 */\n    align-items:center;/*垂直居中 */\n    border-bottom:1px solid #ccc;\n    margin-top:25px;\n}\n/*2.左侧商品与价格 */\n.lefttxt{\n    display:flex;\n    align-items:center;\n}\ntable td input{\n    width:50px;\n}\ntbody{\n    margin-top:50px;\n}\ntbody td{\n    border-bottom:1px solid #E8E0E0;\n}\n.total{\n    float: right;\n    margin-top:20px;\n    margin-right: 100px;\n    font-size: 14px;\n}\n.total b{\n    color:#666666;\n}\n.later{\n    margin-top:30px;\n    float: right;\n}\n.later a{\n    text-decoration:none;\n    display: inline-block;\n    width:314px;height:41px;\n    border:1px solid #ccc;\n    text-align: center;\n    line-height:41px;\n    margin-right:20px;\n    font-size: 14px;\n    color:#000;\n}\n.later a:nth-child(2){\n    background:#522725;\n    color:#fff;\n}\n",{"version":3,"sources":["Cart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Cart.vue","sourceRoot":"src\\components\\web1908\\xz","sourcesContent":["<template>\r\n    <section style=\"margn-top:0px;\">\r\n        <myheader></myheader>\r\n        <div class=\"cart\">\r\n            <div class=\"cartbox\">\r\n                <div class=\"cartimg\">\r\n                    <img src=\"../../../img/cart/cart_headimg.png\">\r\n                </div>\r\n                <div class=\"buytitle\"><h2>我的购物篮</h2></div>\r\n                <div class=\"cartinfo\">\r\n                    <table>\r\n                        <thead>\r\n                            <td class=\"one\">商品名称</td>\r\n                            <td class=\"two\">属性</td>\r\n                            <td class=\"three\">单价</td>\r\n                            <td class=\"four\">数量</td>\r\n                            <td class=\"five\">小计</td>\r\n                            <td class=\"six\">操作</td>\r\n                        </thead>\r\n                        <tbody v-for=\"(item,i) of list\" :key=\"i\">\r\n                            <td style=\"margin-bottom:140px;\">\r\n                                <img class=\"img\" :src=\"'http://127.0.0.1:4000/'+item.cpic\">\r\n                                <div class=\"cname\">{{item.cname}}</div>\r\n                            </td>\r\n                            <td>\r\n                                <span class=\"list-text1\">{{item.csize}}</span>\r\n                            </td>\r\n                            <td>\r\n                                <span class=\"list-text1\">￥{{item.price.toFixed(2)}}</span>\r\n                            </td>\r\n                            <td>\r\n                                <button @click=\"doit1\" value=\"-\" class=\"btn1\" :data-id=\"item.id\"></button>\r\n                                <span class=\"count\">{{item.count}}</span>\r\n                                <button @click=\"doit2\" value=\"+\" class=\"btn2\" :data-id=\"item.id\"></button>\r\n                            </td>\r\n                            <td>￥:{{(item.price*item.count).toFixed(2)}}</td>\r\n                            <td><button @click=\"del\" :data-lid=\"item.lid\" class=\"btn3\">x</button></td>\r\n                        </tbody>\r\n                        <tfoot>\r\n                            <td colspan=\"5\">\r\n                                <div class=\"total\">\r\n                                    <span>商品总计:</span>\r\n                                    <b>￥{{total.toFixed(2)}}</b>\r\n                                </div>\r\n                            </td>\r\n                        </tfoot>\r\n                        \r\n                    </table>\r\n                    <div class=\"later\">\r\n                        <a href=\"javascript:;\" @click=\"conti\" >继续购买</a>\r\n                        <a href=\"javascript:;\" @click=\"accounts\">去结账</a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <myfooter></myfooter>\r\n     </section>\r\n</template>\r\n<script>\r\nimport MyHeader from \"./MyHeader\"\r\nimport MyFooter from \"./MyFooter\"\r\nexport default {\r\n    components:{\r\n        \"myheader\":MyHeader,\r\n        \"myfooter\":MyFooter\r\n    },\r\n    computed:{\r\n        total(){\r\n            var sum = 0;\r\n            for(var item of this.list){\r\n                sum+=item.price*item.count;\r\n            }\r\n            return sum;\r\n        }\r\n    },\r\n    data(){\r\n        return {\r\n            list:[],//保存购物车返回的数据\r\n            n:0,\r\n        }\r\n    },\r\n    created(){\r\n        this.loadMore();\r\n    },\r\n    methods:{\r\n        doit1(event){\r\n            var span=event.target.parentNode.children[1];\r\n            var n=parseInt(span.innerHTML);\r\n            if(n>1){\r\n                var id = event.target.dataset.id;\r\n                var url = \"reducecart\";\r\n                var obj = {id};\r\n                this.axios.get(url,{params:obj}).then(res=>{\r\n                    this.loadMore();\r\n                })\r\n            }\r\n        },\r\n        doit2(event){\r\n            var id = event.target.dataset.id;\r\n            var url = \"addcart\";\r\n            var obj = {id};\r\n            this.axios.get(url,{params:obj}).then(res=>{\r\n                this.loadMore();\r\n            })\r\n        },\r\n        conti(){\r\n            this.$router.push(\"/goods\");\r\n        },\r\n        accounts(){\r\n            this.$router.push(\"/Order\");\r\n        },\r\n        loadMore(){\r\n            var url = \"findcart\";\r\n            this.axios.get(url).then(res=>{\r\n                var rows = res.data.data;\r\n                this.list = rows;\r\n                this.$store.commit(\"clearCartCount\")\r\n                this.$store.commit(\"addCartCount\",rows.length)\r\n            })\r\n        },\r\n        clear(){\r\n            //1.显示交互确认框\r\n            this.$messagebox.confirm(\"是否要清空购物车\")\r\n            .then(res=>{\r\n                //2.创建变量str\r\n                var str = \"\";\r\n                //3.创建循环拼接字符串 id\r\n                for(var item of this.list){\r\n                    str+=item.id+\",\"\r\n                }\r\n                //4.如果当前购物车为空,停止执行\r\n                if(str.length==0){\r\n                    this.$messagebox(\"消息\",\"购物车已为空\");\r\n                    return;\r\n                }\r\n                //5.截取最后字符串,\r\n                str = str.substring(0,str.length-1);\r\n                //6.创建变量url  delm\r\n                var url = \"delm\";\r\n                //7.创建变量obj  参数 ids\r\n                var obj = {ids:str};\r\n                // console.log(obj);\r\n                //8.发送请求ajax\r\n                this.axios.get(url,{params:obj}).then(res=>{\r\n                    if(res.data.code==-2){\r\n                        this.$toast(\"请登录\")\r\n                        this.$router.push(\"/Login\")\r\n                    }else if(res.data.code==-1){\r\n                        this.$toast(\"删除失败\")\r\n                    }else{\r\n                        this.$toast(\"删除成功\");\r\n                        this.loadMore();\r\n                    }\r\n                })\r\n                //9.接收服务器返回的数据\r\n            })\r\n            .catch(err=>{\r\n                console.log(err);\r\n            })\r\n        },\r\n        delItem(){\r\n            //功能:删除用户选中的商品\r\n            // console.log(1);\r\n            //1.显示删除确认框\r\n            this.$messagebox.confirm(\"是否删除选中的商品\")\r\n            .then(res=>{\r\n                //2.创建变量保存字符串,保存删除商品id\r\n                var str = \"\";\r\n                for(var item of this.list){\r\n                    if(item.cb){\r\n                        str+=item.id+\",\";\r\n                    }\r\n                }\r\n                console.log(str);\r\n                if(str.length==0){\r\n                    this.$messagebox(\"消息\",\"请选择要删除的商品\");\r\n                    return;\r\n                }\r\n                //2.1删除字符后逗号\r\n                //0 截取字符串开始下标\r\n                //str.length-1 截取字符串长度\r\n                str = str.substring(0,str.length-1);\r\n                console.log(str);\r\n                //3.如果用户没有选中任何商品,提示\r\n                //4.创建变量url\r\n                var url = \"delm\";\r\n                //5.创建变量obj\r\n                var obj = {ids:str};\r\n                //6.发送ajax请求\r\n                this.axios.get(url,{params:obj}).then(res=>{\r\n                    console.log(3);\r\n                    console.log(res);\r\n                    if(res.data.code==-2){\r\n                        this.$toast(\"请登录\");\r\n                        this.$router.push(\"/Login\")\r\n                    }else if(res.data.code==-1){\r\n                        this.$toast(\"删除失败\")\r\n                    }else{\r\n                        this.$toast(\"删除成功\");\r\n                        this.loadMore();\r\n                    }\r\n                })\r\n            })\r\n            .catch(err=>{\r\n                console.log(err);\r\n            })\r\n        },\r\n        del(event){\r\n            var btn=event.target.parentNode.children[0];\r\n            var n=btn.innerHTML;\r\n            if(n==\"x\"){\r\n                if(confirm(\"是否删除当前商品\")){\r\n                    var lid = event.target.dataset.lid;\r\n                    var url = \"del\";\r\n                    var obj = {lid};\r\n                    this.axios.get(url,{params:obj}).then(res=>{\r\n                        if(res.data.code==-2){\r\n                            alert(\"请登录\")\r\n                            this.$router.push(\"/Login\")\r\n                        }else if(res.data.code==-1){\r\n                            alert(\"删除失败\")\r\n                        }else{\r\n                            alert(\"删除成功\");\r\n                            this.loadMore();\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n        },\r\n        changeItem(){\r\n            //功能:为商品复选框添加修改事件\r\n            //如果所有商品状态为true全选状态也为true\r\n            //如果有一个商品状态为false全选状态也为false\r\n            //1.创建变量sum,累加商品的状态数量\r\n            var sum=0;\r\n            //2.创建循环遍历数据中所有商品状态为true,  ++\r\n            for(var item of this.list){\r\n                if(item.cb){sum++}\r\n            }\r\n            //3.如果sum和数组长度相同,全选为true,否则false\r\n            if(sum==this.list.length){\r\n                this.allcb=true;\r\n            }else{\r\n                this.allcb=false;\r\n            }\r\n        },\r\n        selectAll(){\r\n            //功能:全选按钮状态切换处理函数\r\n            //1.获取全选按钮状态\r\n            var cb = this.allcb;\r\n            //2.创建循环遍历购物车商品\r\n            //3.将全选的状态赋值给购物车商品状态\r\n            for(var item of this.list){\r\n                item.cb = cb;\r\n            }\r\n        },\r\n    },\r\n    \r\n}\r\n</script>\r\n<style scoped>\r\n    .cart{\r\n        width:100%;\r\n        border-top:1px solid #D8D0D0;\r\n        margin-bottom:240px;\r\n    }\r\n    .cartbox{\r\n        width:1200px;height:500px;\r\n        margin:0 auto;\r\n        position: relative;\r\n    }\r\n    .cartimg{\r\n        position:absolute;\r\n        left:41%;\r\n        background:#fff;\r\n        margin-top:20px;\r\n    }\r\n    .cartinfo{\r\n        width:1200px;height:44px;\r\n        position:absolute;\r\n        top:20px;\r\n        text-align:left;\r\n        /* line-height: 100px; */\r\n        font-size:18px;\r\n        color:#464646;\r\n    }\r\n    .buytitle{\r\n        position: absolute;\r\n        top:14%;\r\n        color:#666;\r\n    }\r\n    .cartinfo{\r\n        position: absolute;\r\n        top:40%;\r\n    }\r\n    .cartinfo .img{\r\n        float: left;\r\n    }\r\n    table{\r\n        border-top:1px solid #E8E0E0;\r\n    }\r\n    table thead{\r\n        font-size: 14px;\r\n        color: #666;\r\n        text-align:center;\r\n        font-weight: bold;\r\n    }\r\n    table thead td::after{\r\n        content: \"|\";\r\n        color:#E2E2E2;\r\n        float: right;\r\n    }\r\n    tbody td{\r\n        text-align: center;\r\n    }\r\n    .img{\r\n        width:100px;height:100px;\r\n        vertical-align: middle;\r\n    }\r\n    .one{\r\n        width:512px;height:74px;\r\n    }\r\n    .two{\r\n        width:320px;height:74px;\r\n    }\r\n    .three{\r\n        width:81px;height:74px;\r\n    }\r\n    .four{\r\n        width:149px;height:74px;\r\n    }\r\n    .five{\r\n        width:86px;height:74px;\r\n    }\r\n    .six{\r\n        width:41px;height:74px;\r\n    }\r\n    .cname{\r\n        margin-top: 40px;\r\n        font-size: 18px;\r\n        color:#522725;\r\n        \r\n    }\r\n    .list-text1{\r\n        font-size: 18px;\r\n        color:#522725;\r\n    }\r\n    .btn1{\r\n        width:26px;height:25px;\r\n        background-image: url(../../../img/details/jian.png);\r\n        outline: 0;\r\n        border:0;\r\n    }\r\n    .btn2{\r\n        width:26px;height:25px;\r\n        background-image: url(../../../img/details/jia.png);\r\n        outline: 0;\r\n        border:0;\r\n    }\r\n    .btn3{\r\n        width:26px;height:25px;\r\n        background-image: url(../../../img/details/delete.png);\r\n        outline: 0;\r\n        border:0;\r\n        cursor: pointer;\r\n    }\r\n    .count{\r\n        display: inline-block;\r\n        width:40px;height:18px;\r\n        border:1px solid #ccc;\r\n        padding-top: 6px;\r\n    }\r\n    table tbody td:nth-child(5){\r\n        font-size: 14px;\r\n        color:red;\r\n    }\r\n    /*1.购物车商品 */\r\n    .cart-item{\r\n        display:flex;/*子元素水平 */\r\n        justify-content:space-between;/*水平两端对齐 */\r\n        align-items:center;/*垂直居中 */\r\n        border-bottom:1px solid #ccc;\r\n        margin-top:25px;\r\n    }\r\n    /*2.左侧商品与价格 */\r\n    .lefttxt{\r\n        display:flex;\r\n        align-items:center;\r\n    }\r\n    table td input{\r\n        width:50px;\r\n    }\r\n    tbody{\r\n        margin-top:50px;\r\n    }\r\n    tbody td{\r\n        border-bottom:1px solid #E8E0E0;\r\n    }\r\n    .total{\r\n        float: right;\r\n        margin-top:20px;\r\n        margin-right: 100px;\r\n        font-size: 14px;\r\n    }\r\n    .total b{\r\n        color:#666666;\r\n    }\r\n    .later{\r\n        margin-top:30px;\r\n        float: right;\r\n    }\r\n    .later a{\r\n        text-decoration:none;\r\n        display: inline-block;\r\n        width:314px;height:41px;\r\n        border:1px solid #ccc;\r\n        text-align: center;\r\n        line-height:41px;\r\n        margin-right:20px;\r\n        font-size: 14px;\r\n        color:#000;\r\n    }\r\n    .later a:nth-child(2){\r\n        background:#522725;\r\n        color:#fff;\r\n    }\r\n</style>"]}]}