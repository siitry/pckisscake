{"remainingRequest":"C:\\Users\\81533\\Desktop\\pccaketogithub\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\81533\\Desktop\\pccaketogithub\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\81533\\Desktop\\pccaketogithub\\vue_app_00\\src\\components\\Cart.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\81533\\Desktop\\pccaketogithub\\vue_app_00\\src\\components\\Cart.vue","mtime":1583335898802},{"path":"C:\\Users\\81533\\Desktop\\pccaketogithub\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"C:\\Users\\81533\\Desktop\\pccaketogithub\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"C:\\Users\\81533\\Desktop\\pccaketogithub\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport MyHeader from \"./MyHeader\";\nimport MyFooter from \"./MyFooter\";\nexport default {\n  components: {\n    \"myheader\": MyHeader,\n    \"myfooter\": MyFooter\n  },\n  computed: {\n    total: function total() {\n      var sum = 0;\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.list[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var item = _step.value;\n          sum += item.price * item.count;\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      return sum;\n    }\n  },\n  data: function data() {\n    return {\n      list: [],\n      //保存购物车返回的数据\n      n: 0\n    };\n  },\n  created: function created() {\n    this.loadMore();\n  },\n  methods: {\n    doit1: function doit1(event) {\n      var _this = this;\n\n      var span = event.target.parentNode.children[1];\n      var n = parseInt(span.innerHTML);\n\n      if (n > 1) {\n        var id = event.target.dataset.id;\n        var url = \"reducecart\";\n        var obj = {\n          id: id\n        };\n        this.axios.get(url, {\n          params: obj\n        }).then(function (res) {\n          _this.loadMore();\n        });\n      }\n    },\n    doit2: function doit2(event) {\n      var _this2 = this;\n\n      var id = event.target.dataset.id;\n      var url = \"addcart\";\n      var obj = {\n        id: id\n      };\n      this.axios.get(url, {\n        params: obj\n      }).then(function (res) {\n        _this2.loadMore();\n      });\n    },\n    conti: function conti() {\n      this.$router.push(\"/goods\");\n    },\n    accounts: function accounts() {\n      this.$router.push(\"/Order\");\n    },\n    loadMore: function loadMore() {\n      var _this3 = this;\n\n      var url = \"findcart\";\n      this.axios.get(url).then(function (res) {\n        var rows = res.data.data;\n        _this3.list = rows;\n\n        _this3.$store.commit(\"clearCartCount\");\n\n        _this3.$store.commit(\"addCartCount\", rows.length);\n      });\n    },\n    clear: function clear() {\n      var _this4 = this;\n\n      //1.显示交互确认框\n      this.$messagebox.confirm(\"是否要清空购物车\").then(function (res) {\n        //2.创建变量str\n        var str = \"\"; //3.创建循环拼接字符串 id\n\n        var _iteratorNormalCompletion2 = true;\n        var _didIteratorError2 = false;\n        var _iteratorError2 = undefined;\n\n        try {\n          for (var _iterator2 = _this4.list[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var item = _step2.value;\n            str += item.id + \",\";\n          } //4.如果当前购物车为空,停止执行\n\n        } catch (err) {\n          _didIteratorError2 = true;\n          _iteratorError2 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n              _iterator2.return();\n            }\n          } finally {\n            if (_didIteratorError2) {\n              throw _iteratorError2;\n            }\n          }\n        }\n\n        if (str.length == 0) {\n          _this4.$messagebox(\"消息\", \"购物车已为空\");\n\n          return;\n        } //5.截取最后字符串,\n\n\n        str = str.substring(0, str.length - 1); //6.创建变量url  delm\n\n        var url = \"delm\"; //7.创建变量obj  参数 ids\n\n        var obj = {\n          ids: str\n        }; // console.log(obj);\n        //8.发送请求ajax\n\n        _this4.axios.get(url, {\n          params: obj\n        }).then(function (res) {\n          if (res.data.code == -2) {\n            _this4.$toast(\"请登录\");\n\n            _this4.$router.push(\"/Login\");\n          } else if (res.data.code == -1) {\n            _this4.$toast(\"删除失败\");\n          } else {\n            _this4.$toast(\"删除成功\");\n\n            _this4.loadMore();\n          }\n        }); //9.接收服务器返回的数据\n\n      }).catch(function (err) {\n        console.log(err);\n      });\n    },\n    delItem: function delItem() {\n      var _this5 = this;\n\n      //功能:删除用户选中的商品\n      // console.log(1);\n      //1.显示删除确认框\n      this.$messagebox.confirm(\"是否删除选中的商品\").then(function (res) {\n        //2.创建变量保存字符串,保存删除商品id\n        var str = \"\";\n        var _iteratorNormalCompletion3 = true;\n        var _didIteratorError3 = false;\n        var _iteratorError3 = undefined;\n\n        try {\n          for (var _iterator3 = _this5.list[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n            var item = _step3.value;\n\n            if (item.cb) {\n              str += item.id + \",\";\n            }\n          }\n        } catch (err) {\n          _didIteratorError3 = true;\n          _iteratorError3 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n              _iterator3.return();\n            }\n          } finally {\n            if (_didIteratorError3) {\n              throw _iteratorError3;\n            }\n          }\n        }\n\n        console.log(str);\n\n        if (str.length == 0) {\n          _this5.$messagebox(\"消息\", \"请选择要删除的商品\");\n\n          return;\n        } //2.1删除字符后逗号\n        //0 截取字符串开始下标\n        //str.length-1 截取字符串长度\n\n\n        str = str.substring(0, str.length - 1);\n        console.log(str); //3.如果用户没有选中任何商品,提示\n        //4.创建变量url\n\n        var url = \"delm\"; //5.创建变量obj\n\n        var obj = {\n          ids: str\n        }; //6.发送ajax请求\n\n        _this5.axios.get(url, {\n          params: obj\n        }).then(function (res) {\n          console.log(3);\n          console.log(res);\n\n          if (res.data.code == -2) {\n            _this5.$toast(\"请登录\");\n\n            _this5.$router.push(\"/Login\");\n          } else if (res.data.code == -1) {\n            _this5.$toast(\"删除失败\");\n          } else {\n            _this5.$toast(\"删除成功\");\n\n            _this5.loadMore();\n          }\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    },\n    del: function del(event) {\n      var _this6 = this;\n\n      var btn = event.target.parentNode.children[0];\n      var n = btn.innerHTML;\n\n      if (n == \"x\") {\n        if (confirm(\"是否删除当前商品\")) {\n          var lid = event.target.dataset.lid;\n          var url = \"del\";\n          var obj = {\n            lid: lid\n          };\n          this.axios.get(url, {\n            params: obj\n          }).then(function (res) {\n            if (res.data.code == -2) {\n              alert(\"请登录\");\n\n              _this6.$router.push(\"/Login\");\n            } else if (res.data.code == -1) {\n              alert(\"删除失败\");\n            } else {\n              alert(\"删除成功\");\n\n              _this6.loadMore();\n            }\n          });\n        }\n      }\n    },\n    changeItem: function changeItem() {\n      var sum = 0;\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = this.list[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var item = _step4.value;\n\n          if (item.cb) {\n            sum++;\n          }\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4.return != null) {\n            _iterator4.return();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n\n      if (sum == this.list.length) {\n        this.allcb = true;\n      } else {\n        this.allcb = false;\n      }\n    },\n    selectAll: function selectAll() {\n      var cb = this.allcb; //2.创建循环遍历购物车商品\n      //3.将全选的状态赋值给购物车商品状态\n\n      var _iteratorNormalCompletion5 = true;\n      var _didIteratorError5 = false;\n      var _iteratorError5 = undefined;\n\n      try {\n        for (var _iterator5 = this.list[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n          var item = _step5.value;\n          item.cb = cb;\n        }\n      } catch (err) {\n        _didIteratorError5 = true;\n        _iteratorError5 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion5 && _iterator5.return != null) {\n            _iterator5.return();\n          }\n        } finally {\n          if (_didIteratorError5) {\n            throw _iteratorError5;\n          }\n        }\n      }\n    }\n  }\n};",{"version":3,"sources":["Cart.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <section style=\"margn-top:0px;\">\r\n        <myheader></myheader>\r\n        <div class=\"cart\">\r\n            <div class=\"cartbox\">\r\n                <div class=\"cartimg\">\r\n                    <img src=\"../img/cart/cart_headimg.png\">\r\n                </div>\r\n                <div class=\"buytitle\"><h2>我的购物篮</h2></div>\r\n                <div class=\"cartinfo\">\r\n                    <table>\r\n                        <thead>\r\n                            <td class=\"one\">商品名称</td>\r\n                            <td class=\"two\">属性</td>\r\n                            <td class=\"three\">单价</td>\r\n                            <td class=\"four\">数量</td>\r\n                            <td class=\"five\">小计</td>\r\n                            <td class=\"six\">操作</td>\r\n                        </thead>\r\n                        <tbody v-for=\"(item,i) of list\" :key=\"i\">\r\n                            <td style=\"margin-bottom:140px;\">\r\n                                <img class=\"img\" :src=\"'http://127.0.0.1:4000/'+item.cpic\">\r\n                                <div class=\"cname\">{{item.cname}}</div>\r\n                            </td>\r\n                            <td>\r\n                                <span class=\"list-text1\">{{item.csize}}</span>\r\n                            </td>\r\n                            <td>\r\n                                <span class=\"list-text1\">￥{{item.price.toFixed(2)}}</span>\r\n                            </td>\r\n                            <td>\r\n                                <button @click=\"doit1\" value=\"-\" class=\"btn1\" :data-id=\"item.id\"></button>\r\n                                <span class=\"count\">{{item.count}}</span>\r\n                                <button @click=\"doit2\" value=\"+\" class=\"btn2\" :data-id=\"item.id\"></button>\r\n                            </td>\r\n                            <td>￥:{{(item.price*item.count).toFixed(2)}}</td>\r\n                            <td><button @click=\"del\" :data-lid=\"item.lid\" class=\"btn3\">x</button></td>\r\n                        </tbody>\r\n                        <tfoot>\r\n                            <td colspan=\"5\">\r\n                                <div class=\"total\">\r\n                                    <span>商品总计:</span>\r\n                                    <b>￥{{total.toFixed(2)}}</b>\r\n                                </div>\r\n                            </td>\r\n                        </tfoot>\r\n                        \r\n                    </table>\r\n                    <div class=\"later\">\r\n                        <a href=\"javascript:;\" @click=\"conti\" >继续购买</a>\r\n                        <a href=\"javascript:;\" @click=\"accounts\">去结账</a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <myfooter></myfooter>\r\n     </section>\r\n</template>\r\n<script>\r\nimport MyHeader from \"./MyHeader\"\r\nimport MyFooter from \"./MyFooter\"\r\nexport default {\r\n    components:{\r\n        \"myheader\":MyHeader,\r\n        \"myfooter\":MyFooter\r\n    },\r\n    computed:{\r\n        total(){\r\n            var sum = 0;\r\n            for(var item of this.list){\r\n                sum+=item.price*item.count;\r\n            }\r\n            return sum;\r\n        }\r\n    },\r\n    data(){\r\n        return {\r\n            list:[],//保存购物车返回的数据\r\n            n:0,\r\n        }\r\n    },\r\n    created(){\r\n        this.loadMore();\r\n    },\r\n    methods:{\r\n        doit1(event){\r\n            var span=event.target.parentNode.children[1];\r\n            var n=parseInt(span.innerHTML);\r\n            if(n>1){\r\n                var id = event.target.dataset.id;\r\n                var url = \"reducecart\";\r\n                var obj = {id};\r\n                this.axios.get(url,{params:obj}).then(res=>{\r\n                    this.loadMore();\r\n                })\r\n            }\r\n        },\r\n        doit2(event){\r\n            var id = event.target.dataset.id;\r\n            var url = \"addcart\";\r\n            var obj = {id};\r\n            this.axios.get(url,{params:obj}).then(res=>{\r\n                this.loadMore();\r\n            })\r\n        },\r\n        conti(){\r\n            this.$router.push(\"/goods\");\r\n        },\r\n        accounts(){\r\n            this.$router.push(\"/Order\");\r\n        },\r\n        loadMore(){\r\n            var url = \"findcart\";\r\n            this.axios.get(url).then(res=>{\r\n                var rows = res.data.data;\r\n                this.list = rows;\r\n                this.$store.commit(\"clearCartCount\")\r\n                this.$store.commit(\"addCartCount\",rows.length)\r\n            })\r\n        },\r\n        clear(){\r\n            //1.显示交互确认框\r\n            this.$messagebox.confirm(\"是否要清空购物车\")\r\n            .then(res=>{\r\n                //2.创建变量str\r\n                var str = \"\";\r\n                //3.创建循环拼接字符串 id\r\n                for(var item of this.list){\r\n                    str+=item.id+\",\"\r\n                }\r\n                //4.如果当前购物车为空,停止执行\r\n                if(str.length==0){\r\n                    this.$messagebox(\"消息\",\"购物车已为空\");\r\n                    return;\r\n                }\r\n                //5.截取最后字符串,\r\n                str = str.substring(0,str.length-1);\r\n                //6.创建变量url  delm\r\n                var url = \"delm\";\r\n                //7.创建变量obj  参数 ids\r\n                var obj = {ids:str};\r\n                // console.log(obj);\r\n                //8.发送请求ajax\r\n                this.axios.get(url,{params:obj}).then(res=>{\r\n                    if(res.data.code==-2){\r\n                        this.$toast(\"请登录\")\r\n                        this.$router.push(\"/Login\")\r\n                    }else if(res.data.code==-1){\r\n                        this.$toast(\"删除失败\")\r\n                    }else{\r\n                        this.$toast(\"删除成功\");\r\n                        this.loadMore();\r\n                    }\r\n                })\r\n                //9.接收服务器返回的数据\r\n            })\r\n            .catch(err=>{\r\n                console.log(err);\r\n            })\r\n        },\r\n        delItem(){\r\n            //功能:删除用户选中的商品\r\n            // console.log(1);\r\n            //1.显示删除确认框\r\n            this.$messagebox.confirm(\"是否删除选中的商品\")\r\n            .then(res=>{\r\n                //2.创建变量保存字符串,保存删除商品id\r\n                var str = \"\";\r\n                for(var item of this.list){\r\n                    if(item.cb){\r\n                        str+=item.id+\",\";\r\n                    }\r\n                }\r\n                console.log(str);\r\n                if(str.length==0){\r\n                    this.$messagebox(\"消息\",\"请选择要删除的商品\");\r\n                    return;\r\n                }\r\n                //2.1删除字符后逗号\r\n                //0 截取字符串开始下标\r\n                //str.length-1 截取字符串长度\r\n                str = str.substring(0,str.length-1);\r\n                console.log(str);\r\n                //3.如果用户没有选中任何商品,提示\r\n                //4.创建变量url\r\n                var url = \"delm\";\r\n                //5.创建变量obj\r\n                var obj = {ids:str};\r\n                //6.发送ajax请求\r\n                this.axios.get(url,{params:obj}).then(res=>{\r\n                    console.log(3);\r\n                    console.log(res);\r\n                    if(res.data.code==-2){\r\n                        this.$toast(\"请登录\");\r\n                        this.$router.push(\"/Login\")\r\n                    }else if(res.data.code==-1){\r\n                        this.$toast(\"删除失败\")\r\n                    }else{\r\n                        this.$toast(\"删除成功\");\r\n                        this.loadMore();\r\n                    }\r\n                })\r\n            })\r\n            .catch(err=>{\r\n                console.log(err);\r\n            })\r\n        },\r\n        del(event){\r\n            var btn=event.target.parentNode.children[0];\r\n            var n=btn.innerHTML;\r\n            if(n==\"x\"){\r\n                if(confirm(\"是否删除当前商品\")){\r\n                    var lid = event.target.dataset.lid;\r\n                    var url = \"del\";\r\n                    var obj = {lid};\r\n                    this.axios.get(url,{params:obj}).then(res=>{\r\n                        if(res.data.code==-2){\r\n                            alert(\"请登录\")\r\n                            this.$router.push(\"/Login\")\r\n                        }else if(res.data.code==-1){\r\n                            alert(\"删除失败\")\r\n                        }else{\r\n                            alert(\"删除成功\");\r\n                            this.loadMore();\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n        },\r\n        changeItem(){\r\n            var sum=0;\r\n            for(var item of this.list){\r\n                if(item.cb){sum++}\r\n            }\r\n            if(sum==this.list.length){\r\n                this.allcb=true;\r\n            }else{\r\n                this.allcb=false;\r\n            }\r\n        },\r\n        selectAll(){\r\n            var cb = this.allcb;\r\n            //2.创建循环遍历购物车商品\r\n            //3.将全选的状态赋值给购物车商品状态\r\n            for(var item of this.list){\r\n                item.cb = cb;\r\n            }\r\n        },\r\n    },\r\n    \r\n}\r\n</script>\r\n<style scoped>\r\n    .cart{\r\n        width:100%;\r\n        border-top:1px solid #D8D0D0;\r\n        margin-bottom:240px;\r\n    }\r\n    .cartbox{\r\n        width:1200px;height:500px;\r\n        margin:0 auto;\r\n        position: relative;\r\n    }\r\n    .cartimg{\r\n        position:absolute;\r\n        left:41%;\r\n        background:#fff;\r\n        margin-top:20px;\r\n    }\r\n    .cartinfo{\r\n        width:1200px;height:44px;\r\n        position:absolute;\r\n        top:20px;\r\n        text-align:left;\r\n        /* line-height: 100px; */\r\n        font-size:18px;\r\n        color:#464646;\r\n    }\r\n    .buytitle{\r\n        position: absolute;\r\n        top:14%;\r\n        color:#666;\r\n    }\r\n    .cartinfo{\r\n        position: absolute;\r\n        top:40%;\r\n    }\r\n    .cartinfo .img{\r\n        float: left;\r\n    }\r\n    table{\r\n        border-top:1px solid #E8E0E0;\r\n    }\r\n    table thead{\r\n        font-size: 14px;\r\n        color: #666;\r\n        text-align:center;\r\n        font-weight: bold;\r\n    }\r\n    table thead td::after{\r\n        content: \"|\";\r\n        color:#E2E2E2;\r\n        float: right;\r\n    }\r\n    tbody td{\r\n        text-align: center;\r\n    }\r\n    .img{\r\n        width:100px;height:100px;\r\n        vertical-align: middle;\r\n    }\r\n    .one{\r\n        width:512px;height:74px;\r\n    }\r\n    .two{\r\n        width:320px;height:74px;\r\n    }\r\n    .three{\r\n        width:81px;height:74px;\r\n    }\r\n    .four{\r\n        width:149px;height:74px;\r\n    }\r\n    .five{\r\n        width:86px;height:74px;\r\n    }\r\n    .six{\r\n        width:41px;height:74px;\r\n    }\r\n    .cname{\r\n        margin-top: 40px;\r\n        font-size: 18px;\r\n        color:#522725;\r\n        \r\n    }\r\n    .list-text1{\r\n        font-size: 18px;\r\n        color:#522725;\r\n    }\r\n    .btn1{\r\n        width:26px;height:25px;\r\n        background-image: url(../img/details/jian.png);\r\n        outline: 0;\r\n        border:0;\r\n    }\r\n    .btn2{\r\n        width:26px;height:25px;\r\n        background-image: url(../img/details/jia.png);\r\n        outline: 0;\r\n        border:0;\r\n    }\r\n    .btn3{\r\n        width:26px;height:25px;\r\n        background-image: url(../img/details/delete.png);\r\n        outline: 0;\r\n        border:0;\r\n        cursor: pointer;\r\n    }\r\n    .count{\r\n        display: inline-block;\r\n        width:40px;height:18px;\r\n        border:1px solid #ccc;\r\n        padding-top: 6px;\r\n    }\r\n    table tbody td:nth-child(5){\r\n        font-size: 14px;\r\n        color:red;\r\n    }\r\n    /*1.购物车商品 */\r\n    .cart-item{\r\n        display:flex;\r\n        justify-content:space-between;\r\n        align-items:center;\r\n        border-bottom:1px solid #ccc;\r\n        margin-top:25px;\r\n    }\r\n    /*2.左侧商品与价格 */\r\n    .lefttxt{\r\n        display:flex;\r\n        align-items:center;\r\n    }\r\n    table td input{\r\n        width:50px;\r\n    }\r\n    tbody{\r\n        margin-top:50px;\r\n    }\r\n    tbody td{\r\n        border-bottom:1px solid #E8E0E0;\r\n    }\r\n    .total{\r\n        float: right;\r\n        margin-top:20px;\r\n        margin-right: 100px;\r\n        font-size: 14px;\r\n    }\r\n    .total b{\r\n        color:#666666;\r\n    }\r\n    .later{\r\n        margin-top:30px;\r\n        float: right;\r\n    }\r\n    .later a{\r\n        text-decoration:none;\r\n        display: inline-block;\r\n        width:314px;height:41px;\r\n        border:1px solid #ccc;\r\n        text-align: center;\r\n        line-height:41px;\r\n        margin-right:20px;\r\n        font-size: 14px;\r\n        color:#000;\r\n    }\r\n    .later a:nth-child(2){\r\n        background:#522725;\r\n        color:#fff;\r\n    }\r\n</style>"],"sourceRoot":"src\\components"}]}